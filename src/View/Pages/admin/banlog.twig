{% extends "Templates/admin_layout.twig" %}

{% block body %}
<link rel="stylesheet" href="/assets/css/ban.css" />
<div class="content text-center">
  <div class="row">
    <div class="col-md-7 text-right">
      <h2>Punishments</h2>
    </div>
    <div class="col-md-5">
      <form class="form-inline" action="/admin/banlog/search" method="POST">
        <div class="form-group mb-2 pt-0 ml-auto">
          <label for="search" class="sr-only">Username</label>
          <input type="text" class="form-control" id="search" name="username">
        </div>
        <span class="form-group">
          <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i></button>
        </span>
      </form>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Ban ID</th>
          <th scope="col">Username</th>
          <th scope="col">Reason</th>
          <th scope="col">Punishment Type</th>
          <th scope="col">Issued By</th>
          <th scope="col">Proof</th>
        </tr>
      </thead>
      <tbody>
        {% for ban in banLog %}
        <tr>
          <th scope="row"><a href="/admin/ban/{{ban['id']}}">{{ban['id']}}</a></th>
          <td>
            <a href="/admin/player/{{ban['uuid']}}">{{ban['username']}}</a>
            {% if ban['banned'] %}
              <span class="badge badge-danger">Banned</span></td>
            {% else %}
              <span class="badge badge-success">Unbanned</span></td>
            {% endif %}
          <td>{{ban['reason']}}</td>
          <td>{{ban['punishmentType']}}<br /><small>{{ban['end']}}</small></td>
          <td>{{ban['operator']}}<br /><small>{{ban['start']}}</small></td>
          {% if ban['proof'] is not null %}
            <td><a class="btn btn-warning btn-raised" target="_blank" href="{{ban['proof']}}">Proof</a></td>
          {% else %}
            <td><a class="btn btn-info btn-raised" href="/admin/ban/{{ban['id']}}">Add Proof</a></td>
          {% endif %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <hr />  
  <nav class="d-inline-block">
    <ul class="pagination">
      <li class="page-item">
        {% if pageNumber > 1 %}
          <a class="page-link" href="/admin/banlog/{{pageNumber-1}}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          </a>
        {% endif %}
      </li>
      {% if (pageNumber - 1) > 0 %}
        <li class="page-item"><a class="page-link" href="/admin/banlog/{{pageNumber-1}}">{{pageNumber-1}}</a></li>
      {% endif %}
      <li class="page-item active"><a class="page-link" href="/admin/banlog/{{pageNumber}}">{{pageNumber}}</a></li>
      {% if totalPages != pageNumber %}
      <li class="page-item"><a class="page-link" href="/admin/banlog/{{pageNumber+1}}">{{pageNumber+1}}</a></li>
      <li class="page-item">
        <a class="page-link" href="/admin/banlog/{{pageNumber+1}}">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
      {% endif %}
    </ul>
  </nav>
</div>
{% endblock %}
